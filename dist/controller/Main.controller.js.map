{"version":3,"file":"Main.controller.js","names":["BaseController","formatter","Main","onInit","Model","JSONModel","setData","Factory","isFactory","Products","Materials","Cost","ProductionCap","Product","isProduct","BoughtBy","ProducedBy","Dangerous","Illegal","AvgPrice","Level","getView","setModel","getRouter","getRoute","attachPatternMatched","onPatternMatched","event","getData","inputG","byId","inputF","setFilterFunction","sTerm","oItem","getText","match","RegExp","submitGood","Data","getModel","getProduct","getProperty","setProperty","getCustomersOfProduct","Name","getFactoriesFromProduct","submitFactory","getFactory","getMaterialsForFactory","getProductsFromFactory","onSelectNewFactory","onSelectNewProduct","FormatCredits","number","format","NumberFormat","getIntegerInstance","groupingEnabled","groupingSize","groupingSeparator"],"sources":["../../src/controller/Main.controller.ts"],"sourcesContent":["import MessageBox from \"sap/m/MessageBox\";\nimport BaseController from \"./BaseController\";\nimport formatter from \"../model/formatter\";\nimport Event from \"sap/ui/base/Event\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Input from \"sap/m/Input\";\nimport SuggestionItem from \"sap/m/SuggestionItem\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\n\n/**\n * @namespace de.henloh.prodts.controller\n */\nexport default class Main extends BaseController {\n\tprivate formatter = formatter;\n\n\tpublic onInit(): void {\n\t\tvar Model = new JSONModel();\n\t\tModel.setData({\n\t\t\tFactory: \"\",\n\t\t\tisFactory: false,\n\t\t\tProducts: [],\n\t\t\tMaterials: [],\n\t\t\tCost: 0,\n\t\t\tProductionCap: 0,\n\t\t\t\n\t\t\tProduct: \"\",\n\t\t\tisProduct: false,\n\t\t\tBoughtBy: [],\n\t\t\tProducedBy: [],\n\t\t\tDangerous: false,\n\t\t\tIllegal: false,\n\t\t\tAvgPrice: 0,\n\t\t\tLevel: 0\n\t\t});\n\t\tthis.getView().setModel(Model, \"View\");\n\t\tthis.getRouter().getRoute(\"main\").attachPatternMatched(this.onPatternMatched, this);\n\t}\n\n\tpublic onPatternMatched(event: Event): void {\n\t\tvar Model = new JSONModel()\n\t\tModel.setData(this.getData())\n\t\tthis.getView().setModel(Model, \"Data\")\n\n\t\tvar inputG = this.byId(\"productInput\") as Input\n\t\tvar inputF = this.byId(\"factoryInput\") as Input\n\t\tinputG.setFilterFunction(function (sTerm: string, oItem:SuggestionItem) {\n\t\t\treturn oItem.getText().match(new RegExp(\"^\"+sTerm, \"i\"));\n\t\t});\n\t\tinputF.setFilterFunction(function (sTerm: string, oItem:SuggestionItem) {\n\t\t\treturn oItem.getText().match(new RegExp(\"^\"+sTerm, \"i\"));\n\t\t});\n\t}\n\tpublic submitGood(event: Event): void {\n\t\tvar Data = this.getData();\n\t\tvar Model = this.getView().getModel(\"View\") as JSONModel;\n\t\tvar Product = Data.getProduct(Model.getProperty(\"/Product\"));\n\t\tModel.setProperty(\"/isProduct\", true);\n\t\tModel.setProperty(\"/isFactory\", false);\n\t\tModel.setProperty(\"/Illegal\", Product.Illegal);\n\t\tModel.setProperty(\"/Dangerous\", Product.Dangerous);\n\t\tModel.setProperty(\"/AvgPrice\", Product.AvgPrice);\n\t\tModel.setProperty(\"/Level\", Product.Level);\n\t\tModel.setProperty(\"/BoughtBy\", Data.getCustomersOfProduct(Product.Name));\n\t\tModel.setProperty(\"/ProducedBy\", Data.getFactoriesFromProduct(Product.Name));\n\t}\n\tpublic submitFactory(event: Event): void {\n\t\tvar Data = this.getData();\n\t\tvar Model = this.getView().getModel(\"View\") as JSONModel;\n\t\tvar Factory = Data.getFactory(Model.getProperty(\"/Factory\"));\n\t\tModel.setProperty(\"/isProduct\", false);\n\t\tModel.setProperty(\"/isFactory\", true);\n\t\tModel.setProperty(\"/Cost\", Factory.Cost);\n\t\tModel.setProperty(\"/ProductionCap\", Factory.ProductionCap);\n\t\tModel.setProperty(\"/Materials\", Data.getMaterialsForFactory(Factory.Name));\n\t\tModel.setProperty(\"/Products\", Data.getProductsFromFactory(Factory.Name));\n\t}\n\tpublic onSelectNewFactory(event: Event, Factory: string) {\n\t\tvar Model = this.getView().getModel(\"View\") as JSONModel;\n\t\tModel.setProperty(\"/Factory\", Factory);\n\t\tthis.submitFactory(event);\n\t}\n\tpublic onSelectNewProduct(event: Event, Product: string) {\n\t\tvar Model = this.getView().getModel(\"View\") as JSONModel;\n\t\tModel.setProperty(\"/Product\", Product);\n\t\tthis.submitGood(event);\n\t}\n\tpublic FormatCredits(number: float): string{\n\t\tvar format: NumberFormat = NumberFormat.getIntegerInstance({\n\t\t\tgroupingEnabled: true,\n\t\t\tgroupingSize: 3,\n\t\t\tgroupingSeparator: \",\"\n\t\t});\n\t\treturn format.format(number);\n\t}\n}\n"],"mappings":"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"}