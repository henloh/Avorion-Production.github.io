sap.ui.define(["./BaseController","../model/formatter","sap/ui/model/json/JSONModel"],function(t,n,e){"use strict";function a(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const o=a(t);const r=a(n);const s=o.extend("de.henloh.prodts.controller.Permutation",{constructor:function t(){o.prototype.constructor.apply(this,arguments);this.formatter=r},onInit:function t(){var n=new e;document.title="Permutation";n.setData({text:""});this.getView().setModel(n,"View");this.getRouter().getRoute("main").attachPatternMatched(this.onPatternMatched,this)},onPatternMatched:function t(n){},zooExample:function t(n){var e=this.getView().getModel("View");e.setProperty("/text",`{\n\t"columns": [{\n\t\t"title": "Animal",\n\t\t"parts": [["animals", "animal"],["colors", "color"],["foods", "food"]]\n\t},{\n\t\t"title": "Home",\n\t\t"parts": [["continent"]]\n\t},{\n\t\t"title": "Weight and Height",\n\t\t"parts": [["animals", "weight"],["space"],["animals", "height"]]\n\t}],\n\t"data": {\n\t\t"animals": [\n\t\t\t{"animal": "Zebras are ",\n\t\t\t\t"weight": "800kg",\n\t\t\t\t"height": "200cm"},\n\t\t\t{"animal": "Lions are ",\n\t\t\t\t"weight": "400kg",\n\t\t\t\t"height": "100cm"}\n\t\t],\n\t\t"colors": [\n\t\t\t{"color": "black and white"},\n\t\t\t{"color": "purple"},\n\t\t\t{"color": "green"}\n\t\t],\n\t\t"foods": [\n\t\t\t{"food": " and likes to eat grass."},\n\t\t\t{"food": " and likes to eat lions."},\n\t\t\t{"food": " and likes to eat girafes."}\n\t\t],\n\t\t"continent": ["Africa"],\n\t\t"space": [" "]\n\t}\n}`);this.generateCSV(n)},doorExample:function t(n){var e=this.getView().getModel("View");e.setProperty("/text",`{\n\t"columns": [{\n\t\t"title": "Year of Production",\n\t\t"parts": [["yop"]]\n\t},{\n\t\t"title": "Part number",\n\t\t"parts": [["handles", "partno"], ["frames", "partno"], ["minus"], ["doors", "partno"]]\n\t},{\n\t\t"title": "Handle",\n\t\t"parts": [["handles", "Name"]]\n\t},{\n\t\t"title": "Frame",\n\t\t"parts": [["frames", "Name"]]\n\t},{\n\t\t"title": "Door",\n\t\t"parts": [["doors", "Name"]]\n\t}],\n\t"data": {\n\t\t"yop": ["2024"],\n\t\t"minus": ["-"],\n\t\t"handles": [\n\t\t\t{"partno": "700",\n\t\t\t "Name": "Silver"},\n\t\t\t{"partno": "800",\n\t\t\t "Name": "Gold"},\n\t\t\t{"partno": "801",\n\t\t\t "Name": "Rosegold"},\n\t\t\t{"partno": "900",\n\t\t\t "Name": "Stainless"},\n\t\t\t{"partno": "300",\n\t\t\t "Name": "Brass"},\n\t\t\t{"partno": "600",\n\t\t\t "Name": "No handle"},\n\t\t\t{"partno": "601",\n\t\t\t "Name": "No lock"}\n\t\t],\n\t\t"frames": [\n\t\t\t{"partno": "010",\n\t\t\t "Name": "Ash"},\n\t\t\t{"partno": "020",\n\t\t\t "Name": "Birch"},\n\t\t\t{"partno": "030",\n\t\t\t "Name": "Cherry"},\n\t\t\t{"partno": "040",\n\t\t\t "Name": "Oak"},\n\t\t\t{"partno": "050",\n\t\t\t "Name": "Spruce"},\n\t\t\t{"partno": "060",\n\t\t\t "Name": "Stainless"},\n\t\t\t{"partno": "001",\n\t\t\t "Name": "No frame"}\n\t\t],\n\t\t"doors": [\n\t\t\t{"partno": "888",\n\t\t\t "Name": "Ash"},\n\t\t\t{"partno": "999",\n\t\t\t "Name": "Oak"},\n\t\t\t{"partno": "777",\n\t\t\t "Name": "Birch"},\n\t\t\t{"partno": "444",\n\t\t\t "Name": "Spruce"},\n\t\t\t{"partno": "001",\n\t\t\t "Name": "No door"}\n\t\t]\n\t}\n}`);this.generateCSV(n)},clearData:function t(n){var e=this.getView().getModel("View");e.setProperty("/Final"," ");e.setProperty("/text"," ")},downloadCSV:function t(n){var e=this.getView().getModel("View");var a=e.getProperty("/Final");var o=document.createElement("a");o.href="data:text/csv;charset=utf-8,"+encodeURI(a);o.target="_blank";o.download="generiert.csv";o.click()},generateCSV:function t(n){var e=this.getView().getModel("View");var a=e.getProperty("/text");try{var o="";var r=JSON.parse(a);for(const t of r.columns){o+=t.title+";"}o+="\n";var s=Object.keys(r.data);var l=0;for(const t of s){l==0?l=r.data[t].length:l*=r.data[t].length}var i=[];var c=function(t,n,e){for(let g=0;g<t.length;g++){var a=t[g];for(let v=0;v<a.length;v++){var o=a[v];var s=JSON.parse(JSON.stringify(n));if(o===null){var l=s[g][v].data;for(let a=0;a<l.length;a++){var p=JSON.parse(JSON.stringify(t));var m=n[g][v].name;for(let t=0;t<r.columns.length;t++){for(let n=0;n<r.columns[t].parts.length;n++){var u=r.columns[t].parts[n];var d=r.columns[t].parts[n][1];if(u[0]===m&&p[t][n]===null){p[t][n]=l[a][d]}}}var h=false;var f="";for(const t of p){for(const n of t){if(n===null){h=true;break}f+=n}if(h)break;f+=";"}f+="\n";if(!h){e.push(f);i.push(m)}if(a===l.length-1){}c(p,s,e)}return e}}}};var p=[];var m=[];for(let t=0;t<r.columns.length;t++){p.push([]);m.push([]);for(let n=0;n<r.columns[t].parts.length;n++){const e=r.columns[t].parts[n];if(e.length===1){p[t].push(r.data[r.columns[t].parts[n][0]][0]);m[t].push(null)}else{var u=r.columns[t].parts[n][0];p[t].push(null);m[t].push({name:u,data:r.data[u]})}}}var d=c(p,m,[]);for(const t of d){o+=t}e.setProperty("/rowCount",l);e.setProperty("/Final",o)}catch(t){console.error(t)}}});return s});
//# sourceMappingURL=Permutation.controller.js.map