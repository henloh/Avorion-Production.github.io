sap.ui.define(["./BaseController","../model/formatter","sap/ui/model/json/JSONModel","sap/ui/core/format/NumberFormat"],function(t,e,r,o){function a(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const s=a(t);const i=a(e);const c=s.extend("de.henloh.prodts.controller.Main",{constructor:function t(){s.prototype.constructor.apply(this,arguments);this.formatter=i},onInit:function t(){var e=new r;e.setData({Factory:"",isFactory:false,Products:[],Materials:[],Cost:0,ProductionCap:0,Product:"",isProduct:false,BoughtBy:[],ProducedBy:[],Dangerous:false,Illegal:false,AvgPrice:0,Level:0});this.getView().setModel(e,"View");this.getRouter().getRoute("main").attachPatternMatched(this.onPatternMatched,this);var o=this.byId("productInput");var a=this.byId("factoryInput");o.setFilterFunction(function(t,e){return e.getText().match(new RegExp("^"+t,"i"))});a.setFilterFunction(function(t,e){return e.getText().match(new RegExp("^"+t,"i"))})},buildProdLine:function t(e){this.getRouter().navTo("productionLine")},onPatternMatched:function t(e){var o=new r;o.setData(this.getData());this.getView().setModel(o,"Data");var a=this.getView().getModel("View");try{var s=e.getParameter("arguments")["?query"];if(s.factory){a.setProperty("/Factory",s.factory.replace("%2520"," "));this.submitFactory(e)}if(s.good){a.setProperty("/Product",s.good.replace("%2520"," "));this.submitGood(e)}}catch(t){console.error(t)}},submitGood:function t(e){var r=this.getData();var o=this.getView().getModel("View");var a=r.getProduct(o.getProperty("/Product"));o.setProperty("/isProduct",true);o.setProperty("/isFactory",false);o.setProperty("/Illegal",a.Illegal);o.setProperty("/Dangerous",a.Dangerous);o.setProperty("/AvgPrice",a.AvgPrice);o.setProperty("/Level",a.Level);o.setProperty("/BoughtBy",r.getCustomersOfProduct(a.Name));o.setProperty("/ProducedBy",r.getFactoriesFromProduct(a.Name));this.getRouter().navTo("main",{query:{good:o.getProperty("/Product")}},{},true)},submitFactory:function t(e){var r=this.getData();var o=this.getView().getModel("View");var a=r.getFactory(o.getProperty("/Factory"));o.setProperty("/isProduct",false);o.setProperty("/isFactory",true);o.setProperty("/Cost",a.Cost);o.setProperty("/ProductionCap",a.ProductionCap);o.setProperty("/Materials",r.getMaterialsForFactory(a.Name));o.setProperty("/Products",r.getProductsFromFactory(a.Name));this.getRouter().navTo("main",{query:{factory:o.getProperty("/Factory")}},{},true)},onSelectNewFactory:function t(e,r){var o=this.getView().getModel("View");o.setProperty("/Factory",r);this.submitFactory(e)},onSelectNewProduct:function t(e,r){var o=this.getView().getModel("View");o.setProperty("/Product",r);this.submitGood(e)},FormatCredits:function t(e){var r=o.getIntegerInstance({groupingEnabled:true,groupingSize:3,groupingSeparator:","});return r.format(e)},showAllProducts:function t(e){var r=this.getView().getModel("View");var o=this;r.setProperty("/isProduct",false);r.setProperty("/isFactory",true);r.setProperty("/Cost","");r.setProperty("/ProductionCap","");r.setProperty("/Materials",[]);var a=o.getData().Goods;r.setProperty("/Products",a)},showAllFactories:function t(e){var r=this.getView().getModel("View");var o=this;r.setProperty("/isProduct",true);r.setProperty("/isFactory",false);r.setProperty("/Illegal",false);r.setProperty("/Dangerous",false);r.setProperty("/AvgPrice","");r.setProperty("/Level","");r.setProperty("/BoughtBy",[]);var a=o.getData().Factories;r.setProperty("/ProducedBy",a)}});return c});
//# sourceMappingURL=Main.controller.js.map