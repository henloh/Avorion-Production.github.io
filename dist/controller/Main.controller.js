sap.ui.define(["./BaseController","../model/formatter","sap/ui/model/json/JSONModel","sap/ui/core/format/NumberFormat"],function(t,e,r,o){function a(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const s=a(t);const i=a(e);const n=s.extend("de.henloh.prodts.controller.Main",{constructor:function t(){s.prototype.constructor.apply(this,arguments);this.formatter=i},onInit:function t(){var e=new r;e.setData({Factory:"",isFactory:false,Products:[],Materials:[],Cost:0,ProductionCap:0,Product:"",isProduct:false,BoughtBy:[],ProducedBy:[],Dangerous:false,Illegal:false,AvgPrice:0,Level:0});this.getView().setModel(e,"View");this.getRouter().getRoute("main").attachPatternMatched(this.onPatternMatched,this)},onPatternMatched:function t(e){var o=new r;o.setData(this.getData());this.getView().setModel(o,"Data");var a=this.byId("productInput");var s=this.byId("factoryInput");a.setFilterFunction(function(t,e){return e.getText().match(new RegExp("^"+t,"i"))});s.setFilterFunction(function(t,e){return e.getText().match(new RegExp("^"+t,"i"))})},submitGood:function t(e){var r=this.getData();var o=this.getView().getModel("View");var a=r.getProduct(o.getProperty("/Product"));o.setProperty("/isProduct",true);o.setProperty("/isFactory",false);o.setProperty("/Illegal",a.Illegal);o.setProperty("/Dangerous",a.Dangerous);o.setProperty("/AvgPrice",a.AvgPrice);o.setProperty("/Level",a.Level);o.setProperty("/BoughtBy",r.getCustomersOfProduct(a.Name));o.setProperty("/ProducedBy",r.getFactoriesFromProduct(a.Name))},submitFactory:function t(e){var r=this.getData();var o=this.getView().getModel("View");var a=r.getFactory(o.getProperty("/Factory"));o.setProperty("/isProduct",false);o.setProperty("/isFactory",true);o.setProperty("/Cost",a.Cost);o.setProperty("/ProductionCap",a.ProductionCap);o.setProperty("/Materials",r.getMaterialsForFactory(a.Name));o.setProperty("/Products",r.getProductsFromFactory(a.Name))},onSelectNewFactory:function t(e,r){var o=this.getView().getModel("View");o.setProperty("/Factory",r);this.submitFactory(e)},onSelectNewProduct:function t(e,r){var o=this.getView().getModel("View");o.setProperty("/Product",r);this.submitGood(e)},FormatCredits:function t(e){var r=o.getIntegerInstance({groupingEnabled:true,groupingSize:3,groupingSeparator:","});return r.format(e)}});return n});